<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Colourful To-Do App</title>
<style>
  body{
    margin:0;
    font-family:"Poppins",sans-serif;
    background:linear-gradient(135deg,#ff9a9e,#fad0c4,#fbc2eb,#a6c1ee);
    background-size:400% 400%;
    animation:gradient 12s ease infinite;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
  }
  @keyframes gradient {
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
  }
  .card{
    background:white;
    width:380px;
    padding:20px;
    border-radius:20px;
    box-shadow:0 8px 24px rgba(0,0,0,0.15);
    text-align:center;
    animation:pop 0.6s ease;
  }
  @keyframes pop{
    from{transform:scale(0.8);opacity:0;}
    to{transform:scale(1);opacity:1;}
  }
  h1{
    margin:0 0 15px;
    font-size:1.7rem;
    color:#4f46e5;
  }
  .form{
    display:flex;
    gap:8px;
    margin-bottom:15px;
  }
  input{
    flex:1;
    padding:10px 12px;
    border:2px solid #e5e7eb;
    border-radius:12px;
    font-size:1rem;
    transition:all 0.2s;
  }
  input:focus{
    border-color:#4f46e5;
    outline:none;
    box-shadow:0 0 6px rgba(79,70,229,0.4);
  }
  button{
    border:none;
    background:#4f46e5;
    color:white;
    padding:10px 16px;
    border-radius:12px;
    cursor:pointer;
    font-weight:600;
    transition:transform 0.2s,background 0.3s;
  }
  button:hover{background:#6366f1;transform:translateY(-2px);}
  button:active{transform:scale(0.95);}
  ul{
    list-style:none;
    padding:0;
    margin:0;
    display:flex;
    flex-direction:column;
    gap:10px;
    margin-bottom:15px;
  }
  li{
    background:linear-gradient(90deg,#a18cd1,#fbc2eb);
    padding:10px 14px;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    animation:slideIn 0.4s ease;
  }
  @keyframes slideIn{
    from{transform:translateX(-20px);opacity:0;}
    to{transform:translateX(0);opacity:1;}
  }
  label{
    display:flex;
    align-items:center;
    gap:10px;
    flex:1;
    cursor:pointer;
  }
  .task-text{
    font-size:1rem;
    color:#111827;
    transition:all 0.3s;
  }
  .completed{
    text-decoration:line-through;
    color:#6b7280;
    opacity:0.7;
  }
  .delete-btn{
    background:#ef4444;
    padding:6px 10px;
    border-radius:8px;
    color:white;
    font-size:0.85rem;
    transition:background 0.3s;
  }
  .delete-btn:hover{background:#dc2626;}
  .empty{
    margin:10px 0;
    color:#374151;
    font-size:0.9rem;
  }
  .controls{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
  }
  .filters{
    display:flex;
    gap:6px;
  }
  .filter-btn{
    background:#e5e7eb;
    color:#111827;
    padding:6px 10px;
    border-radius:8px;
    font-size:0.85rem;
    cursor:pointer;
    border:none;
    transition:all 0.3s;
  }
  .filter-btn.active{
    background:#4f46e5;
    color:white;
  }
  .clear-btn{
    background:#f59e0b;
    color:white;
    padding:6px 10px;
    border-radius:8px;
    font-size:0.85rem;
    cursor:pointer;
    border:none;
    transition:background 0.3s;
  }
  .clear-btn:hover{background:#d97706;}
</style>
</head>
<body>
  <div class="card">
    <h1>ðŸŒˆ My To-Do List</h1>
    <form id="todo-form" class="form">
      <input id="todo-input" type="text" placeholder="Add a task..." autocomplete="off">
      <button type="submit">+</button>
    </form>

    <ul id="todo-list"></ul>
    <p id="empty-msg" class="empty">No tasks yet. Add one above!</p>

    <div class="controls">
      <div class="filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="active">Active</button>
        <button class="filter-btn" data-filter="completed">Completed</button>
      </div>
      <button class="clear-btn" id="clear-all">Clear All</button>
    </div>
  </div>

<script>
(() => {
  const STORAGE_KEY="colourful_todo_v2";
  const form=document.getElementById("todo-form");
  const input=document.getElementById("todo-input");
  const list=document.getElementById("todo-list");
  const emptyMsg=document.getElementById("empty-msg");
  const filterBtns=document.querySelectorAll(".filter-btn");
  const clearAllBtn=document.getElementById("clear-all");

  let tasks=loadTasks();
  let filter="all";

  render();

  // add task
  form.addEventListener("submit",e=>{
    e.preventDefault();
    const text=input.value.trim();
    if(!text)return;
    tasks.push({id:Date.now().toString(),text,done:false});
    save();
    render();
    input.value="";
    input.focus();
  });

  // toggle done
  list.addEventListener("change",e=>{
    if(e.target.classList.contains("toggle")){
      const id=e.target.closest("li").dataset.id;
      const t=tasks.find(t=>t.id===id);
      if(t){t.done=e.target.checked;save();render();}
    }
  });

  // delete single
  list.addEventListener("click",e=>{
    if(e.target.classList.contains("delete-btn")){
      const id=e.target.closest("li").dataset.id;
      tasks=tasks.filter(t=>t.id!==id);
      save();render();
    }
  });

  // filter buttons
  filterBtns.forEach(btn=>{
    btn.addEventListener("click",()=>{
      filter=btn.dataset.filter;
      filterBtns.forEach(b=>b.classList.remove("active"));
      btn.classList.add("active");
      render();
    });
  });

  // clear all
  clearAllBtn.addEventListener("click",()=>{
    if(confirm("Clear all tasks?")){
      tasks=[];
      save();
      render();
    }
  });

  function render(){
    list.innerHTML="";
    let filtered=tasks;
    if(filter==="active"){filtered=tasks.filter(t=>!t.done);}
    if(filter==="completed"){filtered=tasks.filter(t=>t.done);}
    if(filtered.length===0){emptyMsg.style.display="block";}
    else{emptyMsg.style.display="none";}
    filtered.forEach(t=>{
      const li=document.createElement("li");
      li.dataset.id=t.id;
      li.innerHTML=`
        <label>
          <input type="checkbox" class="toggle" ${t.done?"checked":""}>
          <span class="task-text ${t.done?"completed":""}">${t.text}</span>
        </label>
        <button class="delete-btn">âœ•</button>
      `;
      list.appendChild(li);
    });
  }

  function save(){localStorage.setItem(STORAGE_KEY,JSON.stringify(tasks));}
  function load(){try{return JSON.parse(localStorage.getItem(STORAGE_KEY))||[]}catch{return[];}}
})();
</script>
</body>
</html>